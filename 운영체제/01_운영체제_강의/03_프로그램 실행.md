# 03_프로그램 실행

>  프로그램의 실행은 파일 시스템에 존재하는 실행 프로그램이 물리적 메모리에 올라가서 하나의 프로세스로 동작하는 것이며, 유저 모드(user mode)와 커널 모드(kernel mode)의 반복이다.

## 1. 동기식/비동기식 입출력

프로그램의 입출력은 크게 동기식과 비동기식으로 나눌 수 있다.

### 1) 동기식 입출력(Synchronous I/O)

※ 동기(Synchro) : 시간적으로 멈추다, Time Plan에 의해 순차적으로 작동하다

I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램으로 넘어가는 방식

- 구현 방법 1) CPU를 계속 갖고 있음
  - I/O가 끝날 때까지 CPU를 낭비시킴. 매 시점 하나의 I/O만 일어남

- 구현 방법 2) CPU를 다른 일을 할 수 있는 프로세스에 넘겨줌
  - I/O가 완료될 때까지 해당 프로그램은 기다려야 하므로 해당 프로그램으로부터 CPU제어권을 가져와서 다른 프로그램에게 주고, I/O결과가 들어오면 다시 해당 프로그램으로 CPU제어권을 넘김

<br>

### 2) 비동기식 입출력(Asychronous I/O)

I/O 시작 이후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 넘어감. 즉, 사용자 프로그램이 I/O 요청만 하고 바로 자기 할 일을 하러 가는 것

![image](https://user-images.githubusercontent.com/93081720/162721599-f12c3543-77c1-4c3c-af6d-15ab7a41536a.png)

#### I/O 수행 방식

1. 각 I/O를 수행하는 special instruction에 의해 수행
2. Memory Mapped I/O에 의해 수행(각 I/O별로 메모리 주소가 mapping되어 있어서 그에 따라 동작함)

<br>

## 2. 저장 장치 계층 구조

![image](https://user-images.githubusercontent.com/93081720/162575651-8351b2b3-1241-46ed-a568-6ef44414dba3.png)

primary로 갈 수록 속도가 빠르고, 가격이 높으며, 메모리가 휘발적임

secondary로 갈 수록 속도가 느리고, 가격이 낮아지며, 메모리가 반영구적임

※ 캐싱: 정보를 복제하여 빠른 저장소에 저장하는 것(재사용성 목적)

<br>

## 3. 프로그램 실행

파일 시스템에 저장된 실행 프로그램이 가상 메모리를 통해서 물리적 메모리에 프로세스로 올라가는 형태로 프로그램이 실행된다.

![image](https://user-images.githubusercontent.com/93081720/162575676-86f05654-e993-451f-9251-110b3512399b.png)

### 1) 커널 주소 공간의 내용

![image](https://user-images.githubusercontent.com/93081720/162575694-98b4c408-a37c-4441-8c11-d9d8dc7e193e.png)

<br>

### 2) 사용자 프로그램이 사용하는 함수

사용자 프로그램은 함수로 구성되어 있음

- 사용자 정의 함수 : 직접 정의한 함수
- 라이브러리 함수 : 다른 곳에서 가져온 함수
- 커널 함수 : 운영체제를 호출할 수 있는 함수

#### (1) 프로그램의 실행(예시)

프로그램의 실행은 함수 호출과 사용자 모드/커널 모드 전환 반복이다.

![image](https://user-images.githubusercontent.com/93081720/162575622-4f575172-b675-4d43-8a70-c5478500837e.png)