# 01_stateful과 stateless

> 상태 유지(stateful)과 상태 유지 않음(stateless)

'stateful하다'와 'stateless하다'의 이해

## 1. stateful

> 서버가 클라이언트의 정보(상태)를 보존한다

### 1) 특징

클라이언트와 서버 간 송수신을 하면서 서버에서 단계별로 진행한 과정의 정보들을 가지고 있는 것을 말한다.

대표적인 프로토콜로는 TCP가 있다.TCP 연결 방식은 연결을 맺고 끊을 때 이전에 주고 받은 ack와 sequence 정보 저장했다가 이를 토대로 서로를 식별한다.

### 2) 문제점

서로의 상태값을 주고받기 때문에 만약에 어느 한쪽이 대체가 된다면, 이전에 주고 받은 내용이 없거나 새로 또 다시 주고 받아야 한다는 것이다.

<br>

## 2. stateless

> 서버가 클라이언트의 정보(상태)를 보존하지 않는다

### 1) 특징

클라이언트와 서버의 통신 과정에서 서버가 클라이언트의 이전 정보들을 가지고 있지 않는 것을 말한다.

따라서 이전 정보들을 가지고 있지 않기 때문에 `통신에 필요한 모든 정보(상태)들은 통신을 할 때마다 서버로 전달`한다.

statelss에서 서버는 단순히 요청(request)에 따른 응답(response)를 보내는 역할과 책임이 있고, 상태 관리는 클라이언트에게 책임이 있는 것이다.

### 2) 문제점

stateless하여 서버가 이전 상태를 저장하고 있지 않기 때문에 클라이언트는 통신을 위해서 매번 이전 정보까지 포함해서 보내야 하는 단점이 생겼다.

이를 극복하기 위해 사용하는 기술이 쿠키, 세션, 토큰 등이 있다. 이들 덕분에 stateless한 이점을 가져가면서도 마치 stateful한 것처럼 통신이 가능한 것이다.

### 3) HTTP가 stateless한 이유?

#### (1) 단순성

- 클라이언트는 요청을 보내고 서버는 요청을 처리하여 응답을 하는 역할만 한다. 굳이 이전 상태 정보를 저장하지 않음으로써 덕분에 설계와 구현이 간단해지는 이점이 생긴다.

#### (2) 확장성

- 상태 정보를 저장하지 않음으로써 서버는 많은 클라이언트로부터 독립적으로 들어오는 요청을 리소스를 덜 사용하면서 더 많이 처리가 가능해진다.

#### (3) 유연성

- 상태 정보를 저장하고 있다면, 네트워크에 문제가 생겼을 때 이전 정보를 토대로 검증하기 때문에 재연결 문제가 생기지만, stateless하다면 새로운 독립적인 요청으로 이해하여 처리 가능해진다.

#### (4) 캐싱, 로드밸런싱 용이

- 상태를 저장하지 않기 때문에 요청을 여러 서버로 분산시켜도 된다. 따라서 로드 밸런싱이 가능해진다. 만약 상태 정보가 중요했다면 이전에 통신한 서버와 계속 연결을 해줘야 하는 문제가 생긴다.
- 응답을 캐싱하여 성능 최적화가 가능해진다. 굳이 동일한 요청에 대한 응답을 동일한 서버에서 할 필요없이 캐싱된 정보를 사용하여 다른 서버에서도 응답이 가능해진다.