# 07_비밀번호 암/복호화

> 비밀번호 암/복호화 로직 개발 관련

비밀번호를 암호화하는 과정이 필요하다면 어떤 방식이 더 적절한가?

## 1. 암호화만 해도 되는 경우

DB에 비밀번호를 암호화하여 저장하되, 해당 비밀번호를 다시 꺼낸 다음 복호화해서 사용할 일이 없을 경우만 해당한다.

보통 비밀번호를 검증만 하는 경우가 그렇다.

### 1) 사용자 로그인 인증

사용자가 회원가입을 하면 입력한 비밀번호를 암호화하여 DB에 저장한다. 이후 사용자가 로그인을 할 때에는 입력한 비밀번호 평문을 암호화하여 해당 값과 DB에 저장된 값이 일치하는지 판단한 다음, 로그인 인증을 허용 처리하면 된다.

### 2) 비밀번호 변경

일반적으로 비밀번호를 변경할 때, 현재 비밀번호를 입력하는 경우가 대다수이다. 이 때 사용자가 입력한 평문 비밀번호를 암호화하여 DB에 저장된 암호화된 값과 비교하여 일치할 경우에는 신규 비밀번호를 입력받게 하고, 불일치 한다면 에러를 반환하면 된다.

<br>

## 2. 복호화도 필요한 경우

DB에 암호화하여 저장한 비밀번호를 다시 꺼낸 다음 복호화해서 사용할 경우에 해당한다. 가장 대표적인 사례로 외부 DB와 연동할 때 사용하는 외부 시스템의 계정/패스워드 정보를 암/복호화하는 경우가 그렇다.

### 1) 외부 시스템 연동 계정/패스워드

외부 시스템의 DB에서 조회를 하거나 업데이트 등의 요청을 보낼 때 사용하는 계정의 패스워드는 다시 호출해서 사용해야 하는 경우가 있기 때문에 암/복호화가 필수적이다.

스프링의 JDBC Template 등의 DB 연결 기술을 사용할 때 DataSource를 생성할 때 입력한 DB연결 정보를 사용한다. 일반적으로는 싱글톤의 DataSource를 사용하기 때문에 한 번 등록하고 나면 외부 시스템 DB 계정에 변경이 있지 않는 이상 변경할 일이 없다.

업데이트 역시 마찬가지로 현재 DB 계정 정보가 더 중요하지 굳이 옛날 비밀번호는 알지 않아도 된다.

하지만, 어플리케이션을 재기동하거나 매번 직접 DB를 호출하는 경우에는 이야기가 달라진다. DB에 암호화된 정보를 사용해야하는데, 암호화된 상태로는 해당 외부 시스템에서는 식별이 불가능하기 때문에 반드시 복호화가 필요해진다.